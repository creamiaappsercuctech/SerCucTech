<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Admin SerCucTech</title>

  <style>
    :root{
      --bg:#0b1220;
      --card:rgba(255,255,255,.06);
      --line:rgba(255,255,255,.12);
      --txt:#eaf0ff;
      --muted:rgba(234,240,255,.72);
      --green:#23c55e;
      --red:#ff4d4d;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--txt);
      padding-bottom:120px;
    }

    header{
      position:sticky;
      top:0;
      z-index:10;
      padding:14px;
      background:linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.15));
      backdrop-filter:blur(10px);
      border-bottom:1px solid var(--line);
    }

    h1{
      margin:0 0 10px;
      font-size:20px;
      font-weight:1000;
      text-align:center;
    }

    /* ðŸ”¥ TASTO CREA NUOVA VETRINA */
    .createBtn{
      display:block;
      width:100%;
      padding:18px 16px;
      font-size:18px;
      font-weight:1000;
      text-align:center;
      border-radius:18px;
      background:var(--green);
      color:#06110a;
      border:none;
      cursor:pointer;
      box-shadow:0 10px 30px rgba(0,0,0,.35);
    }

    .createBtn:active{transform:scale(.98)}

    main{
      padding:16px;
      display:grid;
      gap:14px;
      max-width:900px;
      margin:0 auto;
    }

    .card{
      border:1px solid var(--line);
      background:var(--card);
      border-radius:18px;
      padding:14px;
    }

    .row{
      display:grid;
      gap:10px;
    }

    input{
      width:100%;
      padding:14px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.25);
      color:var(--txt);
      font-size:16px;
      font-weight:900;
    }

    .btn{
      padding:14px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.10);
      color:var(--txt);
      font-weight:900;
      font-size:14px;
      cursor:pointer;
    }

    .btn.green{
      background:var(--green);
      color:#06110a;
      border-color:rgba(0,0,0,.2);
    }

    .btn.red{
      background:rgba(255,77,77,.18);
      color:#fff;
    }

    .small{
      font-size:12px;
      color:var(--muted);
      font-weight:800;
      line-height:1.35;
    }

    .list{
      display:grid;
      gap:10px;
    }

    .item{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding:12px;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.18);
    }

    .item strong{font-weight:1000}

    .itemBtns{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }

    a.linkBtn{
      text-decoration:none;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.08);
      color:var(--txt);
      font-size:12px;
      font-weight:900;
    }
  </style>
</head>

<body>

<header>
  <h1>ðŸ”§ Admin SerCucTech</h1>

  <!-- ðŸ”¥ TASTO PRINCIPALE -->
  <button class="createBtn" onclick="openCreate()">
    âž• CREA NUOVA VETRINA
  </button>
</header>

<main>

  <!-- CREAZIONE -->
  <section class="card" id="createBox" hidden>
    <div class="row">
      <div style="font-weight:1000">ID nuova vetrina</div>
      <input id="newId" placeholder="es. renzo13 / scalvini11">
      <button class="btn green" onclick="createVetrina()">Crea ora</button>
      <div class="small">
        VerrÃ  creato un JSON base.<br>
        Poi carichi immagini e personalizzi.
      </div>
    </div>
  </section>

  <!-- ELENCO -->
  <section class="card">
    <div style="font-weight:1000;margin-bottom:8px">Vetrine esistenti</div>
    <div class="list" id="list"></div>
  </section>

</main>

<script>
  const list = document.getElementById("list");
  const createBox = document.getElementById("createBox");
  const newId = document.getElementById("newId");

  const vetrine = [
    "renzo11",
    "renzo12"
  ];

  function openCreate(){
    createBox.hidden = !createBox.hidden;
    if(!createBox.hidden) newId.focus();
  }

  function createVetrina(){
    const id = newId.value.trim();
    if(!id){
      alert("Inserisci un ID valido");
      return;
    }

    const json = {
      id,
      title: "Nuova Vetrina",
      description: "Descrizione vetrina",
      voice: {
        lang: "it-IT",
        text: "Benvenuto nella nuova vetrina."
      },
      tags: ["vetrina"],
      media: [],
      files: [],
      pinsData: {
        pinSize: 28,
        byImage: {}
      },
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    };

    // download JSON base
    const blob = new Blob([JSON.stringify(json,null,2)], {type:"application/json"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = `${id}.json`;
    a.click();

    // apri pagina link vetrina
    const link = `link.html?id=${encodeURIComponent(id)}`;
    window.open(link, "_blank");

    alert(
      "JSON base creato.\n\n" +
      "1) Carica il file in data/" + id + ".json\n" +
      "2) Aggiungi immagini in media/\n" +
      "3) Apri il link e lavora sulla vetrina"
    );

    newId.value = "";
  }

  function renderList(){
    list.innerHTML = "";
    vetrine.forEach(id=>{
      const el = document.createElement("div");
      el.className = "item";
      el.innerHTML = `
        <div>
          <strong>${id}</strong><br>
          <span class="small">data/${id}.json</span>
        </div>
        <div class="itemBtns">
          <a class="linkBtn" href="link.html?id=${id}">Link</a>
          <a class="linkBtn" href="vetrina.html?id=${id}">Vetrina</a>
        </div>
      `;
      list.appendChild(el);
    });
  }

  renderList();
</script>

</body>
</html>
