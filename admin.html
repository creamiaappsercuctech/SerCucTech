<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Admin SerCucTech</title>
  <link rel="stylesheet" href="stile.css?v=4001">
  <style>
    .wrap{padding:14px}
    .gate{max-width:560px; margin:12px auto; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); border-radius:18px; padding:14px}
    .words{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
    .wordBtn{padding:12px 14px; border-radius:16px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.06); color:#fff; font-weight:900; font-size:18px}
    .row{display:flex; gap:10px; margin-top:12px}
    input{flex:1; padding:12px 14px; border-radius:16px; border:1px solid rgba(255,255,255,.12); background:rgba(0,0,0,.20); color:#fff; font-size:18px}
    .btn{padding:12px 14px; border-radius:16px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.06); color:#fff; font-weight:900; font-size:18px}
    .status{margin-top:10px; color:rgba(255,255,255,.8); font-size:14px}
  </style>
</head>
<body>

<header class="topbar">
  <div class="topbar-inner">
    <div class="brandDot" aria-hidden="true"></div>
    <div class="titleWrap">
      <h1 class="pageTitle">ðŸ”’ Accesso Admin</h1>
      <p class="pageDesc">Sblocco con 2 parole in sequenza, poi PIN. Valido 24 ore su questo dispositivo.</p>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="gate" id="gate">
    <div style="font-weight:900; font-size:16px">
      Tocca prima <b id="w1Label">SerCucTech</b> poi <b id="w2Label">qualsiasi</b> (in questâ€™ordine).
    </div>

    <div class="words">
      <button class="wordBtn" id="w1" type="button">SerCucTech</button>
      <button class="wordBtn" id="w2" type="button">qualsiasi</button>
    </div>

    <div class="row">
      <input id="pin" placeholder="PIN" inputmode="numeric" />
      <button class="btn" id="enter" type="button">Entra</button>
    </div>

    <div class="status" id="status">Stato: blocco attivo</div>
  </div>

  <div class="gate" id="ok" hidden>
    <div style="font-weight:900; margin-bottom:10px">âœ… Sbloccato</div>
    <div class="row">
      <button class="btn" type="button" onclick="location.href='link.html'">Apri indice link</button>
      <button class="btn" type="button" onclick="location.href='vetrina.html?id=renzo11'">Apri vetrina</button>
    </div>
    <div class="status">Ora puoi usare la tua UI admin completa (admin.js), se presente.</div>
  </div>

  <div id="adminRoot"></div>
</main>

<script>
(function(){
  const KEY = "adminUnlockedUntil";
  const gate = document.getElementById("gate");
  const ok = document.getElementById("ok");
  const w1 = document.getElementById("w1");
  const w2 = document.getElementById("w2");
  const pin = document.getElementById("pin");
  const enter = document.getElementById("enter");
  const status = document.getElementById("status");

  // âœ… cambia qui
  const ADMIN_PIN = "1234";
  const WORD1 = "SerCucTech";
  const WORD2 = "qualsiasi";

  w1.textContent = WORD1;
  w2.textContent = WORD2;
  document.getElementById("w1Label").textContent = WORD1;
  document.getElementById("w2Label").textContent = WORD2;

  let step = 0;

  function isUnlocked(){
    const until = parseInt(localStorage.getItem(KEY)||"0",10);
    return Date.now() < until;
  }
  function setUnlocked24h(){
    localStorage.setItem(KEY, String(Date.now() + 24*60*60*1000));
  }
  function showUnlocked(){
    gate.hidden = true;
    ok.hidden = false;
  }
  function msg(t){ status.textContent = t; }

  if(isUnlocked()) showUnlocked();

  w1.addEventListener("click", ()=>{
    step = 1;
    msg("âœ… Primo ok. Ora tocca la seconda parola.");
  });

  w2.addEventListener("click", ()=>{
    if(step === 1){
      step = 2;
      msg("âœ… Frase ok. Ora inserisci PIN e premi Entra.");
    } else {
      step = 0;
      msg("âŒ Ordine sbagliato. Riparti dalla prima parola.");
    }
  });

  enter.addEventListener("click", ()=>{
    if(step !== 2) return alert("Prima tocca le 2 parole in ordine.");
    if((pin.value||"").trim() !== ADMIN_PIN) return alert("PIN errato.");
    setUnlocked24h();
    showUnlocked();

    // se hai admin.js nel repo, lo carico
    const s = document.createElement("script");
    s.src = "admin.js?v=4001";
    s.onerror = () => console.log("admin.js non trovato (ok se non lo usi).");
    document.body.appendChild(s);
  });
})();
</script>

</body>
</html>
