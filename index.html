<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>SerCucTech ‚Äî Indice Link</title>

  <style>
    :root{
      --bg:#0b1220;
      --card:rgba(255,255,255,.06);
      --line:rgba(255,255,255,.12);
      --txt:#eaf0ff;
      --muted:rgba(234,240,255,.72);
      --btn:rgba(255,255,255,.10);
      --green:#23c55e;
      --amber:#ffcc66;
      --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:
        radial-gradient(900px 600px at 20% -20%, rgba(130,170,255,.20), transparent 60%),
        radial-gradient(900px 600px at 90% 10%, rgba(120,255,210,.10), transparent 60%),
        var(--bg);
      color:var(--txt);
      padding:16px;
      padding-bottom:140px;
    }
    .wrap{max-width:980px;margin:0 auto;display:grid;gap:12px}
    .top{
      border:1px solid var(--line);
      background:var(--card);
      border-radius:18px;
      padding:14px;
      box-shadow:var(--shadow);
    }
    h1{margin:0;font-size:20px;font-weight:1000;text-align:center}
    .sub{margin:8px 0 0;color:var(--muted);text-align:center;font-weight:900;line-height:1.35}

    .grid{display:grid;gap:12px}
    @media(min-width:900px){ .grid{grid-template-columns:1fr 1fr;} }

    .card{
      border:1px solid var(--line);
      background:var(--card);
      border-radius:18px;
      padding:14px;
      box-shadow:var(--shadow);
    }
    .titleRow{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
    .title{font-weight:1000}
    .pill{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      color:var(--muted);
      font-weight:900;
      font-size:12px;
    }

    .row{display:grid;gap:10px}
    .item{
      display:grid;
      grid-template-columns:1fr auto auto;
      gap:8px;
      align-items:center;
      padding:12px;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.18);
    }
    .item a{
      color:var(--txt);
      text-decoration:none;
      font-weight:1000;
      word-break:break-word;
    }
    .desc{
      grid-column:1 / -1;
      color:var(--muted);
      font-size:12px;
      font-weight:800;
      line-height:1.35;
      margin-top:2px;
    }

    .btn{
      border:1px solid var(--line);
      background:var(--btn);
      color:var(--txt);
      border-radius:14px;
      padding:10px 12px;
      font-weight:1000;
      cursor:pointer;
      user-select:none;
      white-space:nowrap;
    }
    .btn:active{transform:scale(.99)}
    .btn.green{background:rgba(35,197,94,.18);border-color:rgba(35,197,94,.35)}
    .btn.amber{background:rgba(255,204,102,.18);border-color:rgba(255,204,102,.35)}
    .btnSolid{
      border:none;
      background:var(--green);
      color:#06110a;
      border-radius:16px;
      padding:12px 14px;
      font-weight:1000;
      cursor:pointer;
    }
    .btnSolid:active{transform:scale(.99)}
    .btnWide{width:100%}

    input{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.22);
      color:var(--txt);
      font-weight:900;
      outline:none;
    }

    .bar{
      position:fixed;
      left:0; right:0; bottom:0;
      padding:10px 12px;
      background:linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.55));
      backdrop-filter:blur(10px);
      border-top:1px solid var(--line);
      display:grid;
      gap:10px;
      justify-items:center;
      z-index:999;
    }
    .barInner{
      width:min(980px,100%);
      display:grid;
      grid-template-columns:1fr 1fr 1fr;
      gap:10px;
    }
    @media(max-width:520px){
      .barInner{grid-template-columns:1fr}
    }

    .warn{
      color:rgba(255,255,255,.86);
      background:rgba(255,204,102,.12);
      border:1px solid rgba(255,204,102,.25);
      padding:10px;
      border-radius:14px;
      font-weight:900;
      font-size:12px;
      line-height:1.35;
    }

    .guideBox{
      display:grid;
      gap:10px;
      margin-top:10px;
      border:1px solid rgba(255,255,255,.12);
      border-radius:16px;
      padding:12px;
      background:rgba(0,0,0,.16);
    }
    .guideTitle{
      font-weight:1000;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .mini{
      font-size:12px;
      color:var(--muted);
      font-weight:900;
      line-height:1.35;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <h1>SerCucTech ‚Äî Indice Link</h1>
      <div class="sub">
        Tocca un link per aprirlo. Tocca üîä per sentire la spiegazione (livello 10 anni).
      </div>

      <div class="guideBox">
        <div class="guideTitle">
          <div>üéß Guida completa (audio)</div>
          <span class="pill" id="guideState">pronto</span>
        </div>
        <button class="btnSolid btnWide" id="playFullGuide">‚ñ∂Ô∏è Ascolta guida completa</button>
        <div class="row" style="grid-template-columns:1fr 1fr;gap:10px">
          <button class="btn" id="pauseGuide">‚è∏Ô∏è Pausa</button>
          <button class="btn" id="resumeGuide">‚ñ∂Ô∏è Riprendi</button>
        </div>
        <div class="mini">
          Questa guida spiega tutto: cos‚Äô√® una vetrina, cosa fa l‚ÄôAdmin, cosa condividere su WhatsApp,
          e come mettere JSON e media su GitHub.
        </div>
        <div class="warn" id="audioWarn" style="display:none">
          ‚ö†Ô∏è Su Android/Chrome l‚Äôaudio pu√≤ partire solo dopo un tuo tocco.
          Se non senti la voce, tocca di nuovo ‚ÄúAscolta guida completa‚Äù.
        </div>
      </div>
    </div>

    <div class="grid">

      <div class="card">
        <div class="titleRow">
          <div class="title">üîß Pagine principali</div>
          <span class="pill" id="statusPill">carico‚Ä¶</span>
        </div>

        <div class="row" id="mainLinks"></div>
      </div>

      <div class="card">
        <div class="titleRow">
          <div class="title">üîç Apri una vetrina per ID</div>
          <span class="pill">link.html?id=...</span>
        </div>

        <div class="row">
          <input id="idBox" placeholder="Scrivi ID (es. renzo11)" />
          <button class="btnSolid" id="openLinkBtn">Apri pagina link della vetrina</button>
        </div>

        <div class="row" style="margin-top:10px">
          <div class="item">
            <a id="previewLink" href="link.html?id=renzo11">link.html?id=renzo11</a>
            <button class="btn green" id="copyPreview">Copia</button>
            <button class="btn amber" id="speakPreview">üîä</button>
            <div class="desc">Questo √® il link che di solito condividi su WhatsApp.</div>
          </div>
        </div>
      </div>

    </div>

    <div class="card">
      <div class="titleRow">
        <div class="title">üßæ Elenco vetrine (automatico da data/vetrine.json)</div>
        <span class="pill" id="countPill">0</span>
      </div>
      <div class="row" id="vetrineList"></div>
    </div>
  </div>

  <div class="bar">
    <div class="barInner">
      <button class="btnSolid" id="stopAudio">‚èπÔ∏è Ferma voce</button>
      <button class="btn" id="speakWhatToShare">üîä Cosa condividere su WhatsApp?</button>
      <button class="btn" id="speakIfBroken">üîä Se mi si rompe il telefono?</button>
    </div>
  </div>

<script>
(function(){
"use strict";

const statusPill = document.getElementById("statusPill");
const countPill  = document.getElementById("countPill");
const mainLinks  = document.getElementById("mainLinks");
const vetrineList= document.getElementById("vetrineList");
const audioWarn  = document.getElementById("audioWarn");

const idBox = document.getElementById("idBox");
const openLinkBtn = document.getElementById("openLinkBtn");
const previewLink = document.getElementById("previewLink");
const copyPreview = document.getElementById("copyPreview");
const speakPreview= document.getElementById("speakPreview");

const stopAudioBtn= document.getElementById("stopAudio");
const speakWhatToShareBtn = document.getElementById("speakWhatToShare");
const speakIfBrokenBtn = document.getElementById("speakIfBroken");

const playFullGuideBtn = document.getElementById("playFullGuide");
const pauseGuideBtn = document.getElementById("pauseGuide");
const resumeGuideBtn = document.getElementById("resumeGuide");
const guideState = document.getElementById("guideState");

const base = location.origin + location.pathname.replace(/index\.html$/,"");

function canSpeak(){ return "speechSynthesis" in window && "SpeechSynthesisUtterance" in window; }
function stopSpeak(){ try{ speechSynthesis.cancel(); }catch(e){} }
function pauseSpeak(){ try{ speechSynthesis.pause(); }catch(e){} }
function resumeSpeak(){ try{ speechSynthesis.resume(); }catch(e){} }

function speak(text){
  if(!canSpeak()) return alert("Sintesi vocale non disponibile su questo browser.");
  try{
    stopSpeak();
    const u = new SpeechSynthesisUtterance(text);
    u.lang = navigator.language || "it-IT";
    u.rate = 1.03;
    u.onstart = ()=>{ guideState.textContent = "parlo‚Ä¶"; };
    u.onend = ()=>{ guideState.textContent = "finito"; };
    u.onerror = ()=>{ guideState.textContent = "errore"; audioWarn.style.display=""; };
    speechSynthesis.speak(u);
  }catch(e){
    guideState.textContent = "errore";
    audioWarn.style.display = "";
  }
}

stopAudioBtn.addEventListener("click", ()=>{ stopSpeak(); guideState.textContent="pronto"; });

pauseGuideBtn.addEventListener("click", ()=>{
  pauseSpeak();
  guideState.textContent = "in pausa";
});
resumeGuideBtn.addEventListener("click", ()=>{
  resumeSpeak();
  guideState.textContent = "parlo‚Ä¶";
});

function mkItem({label, href, explain}){
  const el = document.createElement("div");
  el.className = "item";
  el.innerHTML = `
    <a href="${href}">${label}</a>
    <button class="btn green copyBtn">Copia</button>
    <button class="btn amber speakBtn">üîä</button>
    <div class="desc"></div>
  `;
  el.querySelector(".desc").textContent = explain.short;
  el.querySelector(".copyBtn").addEventListener("click", async ()=>{
    try{
      await navigator.clipboard.writeText(href.startsWith("http") ? href : (base + href));
      alert("Copiato ‚úÖ");
    }catch(e){
      alert("Copia non riuscita. Tieni premuto sul link e copia manualmente.");
    }
  });
  el.querySelector(".speakBtn").addEventListener("click", ()=>{
    speak(explain.long);
  });
  return el;
}

const explainers = {
  home: {
    short: "Questa √® la pagina indice con tutti i link.",
    long:
`Questa pagina √® come una mappa.
Quando non sai dove andare, torni qui e scegli.
Ci sono i link per l‚ÄôAdmin, per le vetrine, e per GitHub.
E vicino a ogni link c‚Äô√® un tasto con la voce che ti spiega cosa fare.`
  },
  admin: {
    short: "Pagina per te (crea, duplica, backup).",
    long:
`L‚ÄôAdmin √® la stanza dei comandi.
Qui puoi creare una vetrina nuova, duplicarne una gi√† pronta e fare backup.
√à protetto, cos√¨ gli utenti non entrano e non cambiano cose per sbaglio.`
  },
  linkPage: {
    short: "Pagina da condividere agli utenti.",
    long:
`La pagina ‚Äúlink‚Äù √® quella da mandare su WhatsApp.
Perch√©? Perch√© √® semplice: l‚Äôutente apre e vede subito come entrare nella vetrina.
Cos√¨ non si perde e tu lavori pi√π veloce.`
  },
  vetrina: {
    short: "Pagina pubblica con immagini, numerini e audio.",
    long:
`La vetrina √® la pagina dove si vede tutto: foto, numerini sugli oggetti, e il testo fisso.
Quando una persona guarda la vetrina, capisce cosa c‚Äô√® in vendita e pu√≤ contattarti.`
  },
  githubData: {
    short: "Cartella data: qui metti i file .json delle vetrine.",
    long:
`GitHub √® come un armadio online.
Nella cartella data ci sono i file JSON, cio√® le ‚Äúschede‚Äù delle vetrine.
Ogni vetrina ha il suo file, tipo renzo11.json.
Quando crei una vetrina, devi mettere il file dentro data e fare Commit.`
  },
  githubMedia: {
    short: "Cartella media: qui carichi immagini e video.",
    long:
`Nella cartella media metti le foto e i video.
√à come una scatola di immagini.
Se vuoi ordine, usa nomi tipo: renzo11-001.jpg, renzo11-002.jpg.
Cos√¨ capisci subito di quale vetrina sono.`
  },
  githubIndex: {
    short: "File vetrine.json: lista di tutte le vetrine.",
    long:
`Questo file √® l‚Äôelenco ufficiale delle vetrine.
Serve all‚ÄôAdmin per mostrarti la lista e per farti scegliere quale duplicare.
Quando aggiungi una vetrina, devi aggiungere anche una riga qui.`
  }
};

const fullGuideText =
`Ciao! Ora ti spiego tutto come se avessi dieci anni, ma in modo completo.

Immagina che tu abbia un negozio fatto di pagine web.
Ogni ‚Äúvetrina‚Äù √® come un cartellone con foto e oggetti da mostrare.

Ci sono tre cose importanti:

Uno: la pagina ‚Äúvetrina‚Äù.
Questa √® la pagina dove si vedono le immagini, i numerini sugli oggetti, e l‚Äôaudio di benvenuto.
√à la pagina pi√π ricca.

Due: la pagina ‚Äúlink‚Äù.
Questa √® una pagina semplice che serve solo per aiutare le persone.
Quando tu condividi un link su WhatsApp, √® meglio condividere la pagina link,
perch√© chi la apre capisce subito cosa deve fare e non si perde.

Tre: la pagina ‚Äúadmin‚Äù.
Quella √® solo per te. √à protetta.
Dentro l‚Äôadmin puoi creare una vetrina nuova, duplicare una vetrina, e fare backup.

Ora come funziona quando crei una vetrina nuova?

Passo uno: vai in Admin e premi ‚ÄúCrea nuova vetrina‚Äù.
L‚Äôadmin ti fa scaricare un file che si chiama con l‚ÄôID, per esempio renzo13 punto json.
Quel file contiene tutte le informazioni: titolo, testo fisso, lista immagini e numerini.

Passo due: devi mettere quel file su GitHub nella cartella data.
Apri GitHub, vai su data, apri o crea data/renzo13.json, incolli il contenuto, e fai Commit.
Questo rende la vetrina pubblica online.

Passo tre: devi caricare le foto nella cartella media su GitHub.
Carichi i file e li nomini bene, tipo renzo13-001.jpg, renzo13-002.jpg.
Poi nel JSON metti gli URL delle immagini.

Passo quattro: aggiorni l‚Äôelenco delle vetrine.
C‚Äô√® un file che si chiama data/vetrine.json.
Dentro ci sono tutti gli ID delle vetrine.
Se aggiungi renzo13, devi aggiungere anche una riga l√¨, e fare Commit.
Cos√¨ l‚ÄôAdmin vede la nuova vetrina nell‚Äôelenco.

Ora cosa condividi su WhatsApp?
Condividi sempre: link punto html punto interrogativo id uguale renzo13.
Per esempio: link.html?id=renzo13.
Quello √® il link facile per gli utenti.

E se ti si rompe il telefono?
Non √® un problema grosso se hai salvato tutto su GitHub.
Perch√© GitHub tiene i tuoi file online.
Con un altro telefono, apri la repo e ritrovi data e media.
E puoi anche fare un backup ZIP dall‚ÄôAdmin per sicurezza.

Fine.
Se vuoi, posso aggiungere anche una guida ancora pi√π passo passo con numeri: 1,2,3,4,
cos√¨ segui come una checklist.`;

function renderMain(){
  mainLinks.innerHTML = "";

  mainLinks.appendChild(mkItem({
    label: "üè† Home (questa pagina)",
    href: "index.html",
    explain: explainers.home
  }));
  mainLinks.appendChild(mkItem({
    label: "üîí Admin",
    href: "admin.html",
    explain: explainers.admin
  }));
  mainLinks.appendChild(mkItem({
    label: "üìÑ Pagina link vetrina (esempio renzo11)",
    href: "link.html?id=renzo11",
    explain: explainers.linkPage
  }));
  mainLinks.appendChild(mkItem({
    label: "üñºÔ∏è Vetrina diretta (esempio renzo11)",
    href: "vetrina.html?id=renzo11",
    explain: explainers.vetrina
  }));
  mainLinks.appendChild(mkItem({
    label: "üìÅ GitHub cartella data",
    href: `https://github.com/creamiaappsercuctech/SerCucTech/tree/main/data`,
    explain: explainers.githubData
  }));
  mainLinks.appendChild(mkItem({
    label: "üñºÔ∏è GitHub cartella media",
    href: `https://github.com/creamiaappsercuctech/SerCucTech/tree/main/media`,
    explain: explainers.githubMedia
  }));
  mainLinks.appendChild(mkItem({
    label: "üßæ GitHub file data/vetrine.json",
    href: `https://github.com/creamiaappsercuctech/SerCucTech/blob/main/data/vetrine.json`,
    explain: explainers.githubIndex
  }));
}

function setPreview(id){
  const clean = (id||"renzo11").trim() || "renzo11";
  const href = `link.html?id=${encodeURIComponent(clean)}`;
  previewLink.href = href;
  previewLink.textContent = href;
  previewLink.dataset.id = clean;
}

idBox.addEventListener("input", ()=> setPreview(idBox.value));
openLinkBtn.addEventListener("click", ()=>{
  const clean = (idBox.value||"").trim();
  if(!clean) return alert("Scrivi un ID (es. renzo11)");
  location.href = `link.html?id=${encodeURIComponent(clean)}`;
});

copyPreview.addEventListener("click", async ()=>{
  const id = previewLink.dataset.id || "renzo11";
  const full = `${base}link.html?id=${encodeURIComponent(id)}`;
  try{
    await navigator.clipboard.writeText(full);
    alert("Copiato ‚úÖ");
  }catch(e){
    alert("Copia non riuscita.");
  }
});

speakPreview.addEventListener("click", ()=>{
  speak(explainers.linkPage.long);
});

playFullGuideBtn.addEventListener("click", ()=>{
  speak(fullGuideText);
});

speakWhatToShareBtn.addEventListener("click", ()=>{
  speak(
`Cosa condividere su WhatsApp?
Condividi sempre la pagina link, non la vetrina diretta.
Per esempio: link.html?id=renzo11.
Perch√© √® pi√π semplice per gli utenti: entrano, capiscono, e trovano subito i pulsanti giusti.`
  );
});

speakIfBrokenBtn.addEventListener("click", ()=>{
  speak(
`Se ti si rompe il telefono, recuperi tutto da GitHub.
Perch√© i file veri stanno online: la cartella data con i JSON e la cartella media con foto e video.
Apri GitHub da un altro telefono e ritrovi tutto.
Per sicurezza puoi anche fare un backup ZIP dall‚ÄôAdmin.`
  );
});

/* ----------- Elenco vetrine automatico ----------- */
async function loadIndex(){
  statusPill.textContent = "carico vetrine‚Ä¶";
  try{
    const res = await fetch("data/vetrine.json", {cache:"no-store"});
    if(!res.ok) throw new Error("HTTP " + res.status);
    const j = await res.json();
    const list = Array.isArray(j.vetrine) ? j.vetrine : [];
    countPill.textContent = String(list.length);

    vetrineList.innerHTML = "";
    list.forEach(v=>{
      const id = String(v.id||"").trim();
      if(!id) return;
      const title = String(v.title||id);

      const linkHref = `link.html?id=${encodeURIComponent(id)}`;
      const vetrinaHref = `vetrina.html?id=${encodeURIComponent(id)}`;

      const explainLong =
`Questa √® la vetrina con ID ${id}.
Per condividerla su WhatsApp usa: ${linkHref}.
Se vuoi vedere direttamente foto e numeri, apri: ${vetrinaHref}.
La pagina link √® consigliata per gli utenti, perch√© √® pi√π semplice.`;

      const box = document.createElement("div");
      box.className = "item";
      box.innerHTML = `
        <a href="${linkHref}">üë§ ${title} ‚Äî (link) ${linkHref}</a>
        <button class="btn green copyBtn">Copia</button>
        <button class="btn amber speakBtn">üîä</button>
        <div class="desc"></div>
      `;

      box.querySelector(".copyBtn").addEventListener("click", async ()=>{
        const full = `${base}${linkHref}`;
        try{
          await navigator.clipboard.writeText(full);
          alert("Copiato ‚úÖ");
        }catch(e){
          alert("Copia non riuscita.");
        }
      });

      box.querySelector(".speakBtn").addEventListener("click", ()=> speak(explainLong));

      const desc = box.querySelector(".desc");
      desc.innerHTML = `Apri pagina link (consigliata). Vetrina diretta: <span style="text-decoration:underline;cursor:pointer">${vetrinaHref}</span>`;
      desc.querySelector("span").addEventListener("click", ()=> location.href = vetrinaHref);

      vetrineList.appendChild(box);
    });

    statusPill.textContent = "pronto";
  }catch(e){
    statusPill.textContent = "errore";
    vetrineList.innerHTML = `
      <div class="warn">
        Non riesco a leggere <b>data/vetrine.json</b>.<br>
        Controlla che esista in repo e che sia pubblico.
      </div>`;
  }
}

renderMain();
setPreview("renzo11");
loadIndex();
})();
</script>

</body>
</html>
