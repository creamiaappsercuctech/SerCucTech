<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Vetrina</title>
  <link rel="stylesheet" href="style.css?v=9">
</head>

<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brandDot" aria-hidden="true"></div>

      <div class="titleWrap">
        <h1 id="pageTitle" class="pageTitle">Caricamentoâ€¦</h1>
        <p id="pageDesc" class="pageDesc"></p>
      </div>

      <span id="badgeId" class="idBadge">id: -</span>
    </div>

    <!-- TESTO AUDIO FISSO + CONTATTI (CLICCA QUI PER FAR PARTIRE AUDIO) -->
    <section class="voicePanel" id="voicePanel" hidden>
      <div class="voicePanelInner" id="voiceClickable">
        <div class="voiceTop">
          <div class="voiceTitle">ğŸ“£ Messaggio (tocca qui o â€œVoiceâ€ per ascoltare)</div>
          <div class="voiceHint">Numeri cliccabili: WhatsApp / chiamata</div>
        </div>

        <div class="voiceText" id="voiceText"></div>

        <div class="contactsRow" id="contactsRow"></div>
        <div class="contactsHint">ğŸ‘‰ Tocca un numero per contattare subito</div>
      </div>
    </section>

    <!-- INDICE ALTRE VETRINE -->
    <section class="indexPanel" id="indexPanel" hidden>
      <div class="indexPanelInner">
        <div class="indexHead">
          <div class="indexTitle">ğŸ“š Altre vetrine</div>
          <button class="indexBtn" id="indexRefreshBtn" type="button">Aggiorna</button>
        </div>
        <div class="indexHint">
          Questo indice Ã¨ uguale in tutte le vetrine: cosÃ¬ da una vetrina puoi entrare nelle altre.
        </div>
        <div class="indexList" id="indexList"></div>
      </div>
    </section>
  </header>

  <main class="content">
    <!-- GALLERIA -->
    <section class="card heroCard">
      <div class="hero">
        <button class="navBtn left" id="prevBtn" aria-label="Immagine precedente" type="button">â€¹</button>

        <div class="mediaStage" id="mediaStage">
          <div class="imgCounter" id="imgCounter">01/01</div>

          <div class="imgWrap" id="imgWrap">
            <img id="heroImg" class="heroImg" alt="Immagine vetrina">
            <div id="pinsLayer" class="pinsLayer" aria-hidden="true"></div>

            <!-- CTA WhatsApp sulla foto (UNICO) -->
            <button class="waOnPhoto" id="waPhotoBtn" type="button">
              ğŸŸ¢ WhatsApp (Foto) â€¢ Chiedi info
            </button>
          </div>

          <div class="imgBadge" id="imgBadge">01</div>
        </div>

        <button class="navBtn right" id="nextBtn" aria-label="Immagine successiva" type="button">â€º</button>
      </div>

      <div class="thumbRow" id="thumbRow"></div>

      <div class="smallHint">
        Swipe sulle foto â€¢ Tap sulla foto = schermo intero â€¢ Tap di nuovo = normale
        <br>
        <span class="smallHint2">ModalitÃ  numerini & archivio: tap sul titolo 5 volte (solo sul tuo telefono)</span>
      </div>
    </section>

    <!-- FILES (se li aggiungi nel JSON) -->
    <section class="card" id="filesCard" hidden>
      <h2 class="h2">Files</h2>
      <div id="filesList" class="filesList"></div>
    </section>

    <!-- ADMIN: ARCHIVIO RICHIESTE INFO (SOLO TU) -->
    <section class="card adminCard" id="adminCard" hidden>
      <div class="adminHead">
        <h2 class="h2" style="margin:0">ğŸ”’ Archivio richieste info (solo tu)</h2>
        <span class="labelBadge" id="adminBadge">OFF</span>
      </div>

      <div class="adminBtns">
        <button class="labelBtn" id="exportRequestsBtn" type="button">Export richieste (JSON)</button>
        <button class="labelBtn" id="copyRequestsBtn" type="button">Copia richieste</button>
        <button class="labelBtn danger" id="clearRequestsBtn" type="button">Pulisci archivio</button>
      </div>

      <div class="adminHint">
        âœ… Qui finiscono le richieste â€œChiedi infoâ€ con data/ora, foto e messaggio.<br>
        âœ… Restano sul TUO telefono (localStorage). Per â€œper sempreâ€ anche se cambi telefono: usa â€œExportâ€.
      </div>

      <textarea id="requestsBox" class="pinsJsonBox" placeholder="Qui vedrai le richieste archiviateâ€¦"></textarea>
    </section>

    <!-- LABEL TOOL (NASCOSTO) -->
    <section class="card labelCard" id="labelCard" hidden>
      <div class="labelHead">
        <h2 class="h2" style="margin:0">ğŸ§· Numerini manuali sugli oggetti</h2>
        <span class="labelBadge" id="labelModeBadge">OFF</span>
      </div>

      <div class="labelControls">
        <button class="labelBtn" id="labelToggleBtn" type="button">Attiva/Disattiva</button>
        <button class="labelBtn" id="labelUndoBtn" type="button">Annulla ultimo</button>
        <button class="labelBtn danger" id="labelClearBtn" type="button">Pulisci tutti</button>
      </div>

      <div class="labelSliderRow">
        <div class="labelSliderTitle">Grandezza numerino</div>
        <input type="range" id="pinSizeRange" min="14" max="64" value="28">
        <div class="labelSliderValue"><span id="pinSizeValue">28</span> px</div>
      </div>

      <div class="labelExportRow">
        <button class="labelBtn" id="exportPinsBtn" type="button">Export pinsData (JSON)</button>
        <button class="labelBtn" id="copyPinsBtn" type="button">Copia pinsData</button>
      </div>

      <textarea id="pinsJsonBox" class="pinsJsonBox" placeholder="Qui comparirÃ  il JSON dei pinsâ€¦"></textarea>

      <div class="labelTip">
        âœ… ModalitÃ  attiva: tocca lâ€™immagine per piazzare un numerino (1,2,3â€¦).<br>
        âœ… I numerini restano salvati sul tuo telefono.<br>
        âœ… Per farli vedere a TUTTI: copia â€œpinsDataâ€ e incollalo dentro il tuo file JSON della vetrina.
      </div>
    </section>

    <!-- ERRORE -->
    <section class="card errorCard" id="errorCard" hidden>
      <h2 class="h2">Errore</h2>
      <div id="errorText" class="errorText"></div>
    </section>
  </main>

  <!-- SHARE sopra la barra -->
  <div class="shareDock">
    <button class="shareBtn" id="shareBtn" type="button">Condividi questa vetrina su WhatsApp</button>
  </div>

  <!-- BOTTOM BAR fissa -->
  <nav class="bottombar" id="bottombar">
    <button class="barBtn" id="homeBtn" type="button">Home</button>
    <button class="barBtn" id="voiceBtn" type="button">Voice</button>
    <button class="barBtn danger" id="stopBtn" type="button">Stop</button>
    <button class="barBtn" id="fullBtn" type="button">Full</button>
    <button class="barBtn" id="themeBtn" type="button">Tema</button>
    <button class="barBtn" id="kioskBtn" type="button">Kiosk</button>
  </nav>

  <!-- AUDIO GATE (non blocca i bottoni) -->
  <div class="audioGate" id="audioGate" hidden>
    <div class="audioGateCard">
      <div class="audioGateTitle">Audio bloccato dal telefono</div>
      <div class="audioGateText">Tocca â€œAttiva audioâ€. Poi partirÃ  automaticamente.</div>
      <div class="audioGateBtns">
        <button class="primary" id="enableAudioBtn" type="button">Attiva audio</button>
        <button class="ghost" id="skipAudioBtn" type="button">Non ora</button>
      </div>
    </div>
  </div>

  <!-- MODAL per aprire 2Â° numero senza blocchi -->
  <div class="waModal" id="waModal" hidden>
    <div class="waModalCard">
      <div class="waModalTitle">Invio WhatsApp a 2 numeri</div>
      <div class="waModalText" id="waModalText"></div>
      <div class="waModalBtns">
        <button class="primary" id="waOpenSecondBtn" type="button">Apri Sergio</button>
        <button class="ghost" id="waCloseBtn" type="button">Chiudi</button>
      </div>
    </div>
  </div>

  <script src="app.js?v=9"></script>
</body>
</html>
